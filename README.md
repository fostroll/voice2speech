# voice2speech

Набор утилит для распознавания речи. Для работы нужны *ffmpeg* и доступ к
*Yandex SpeechKit* (облачный или боксовый)

## Использование

```sh
python make_chunks.py [n_procs]
```
Извлекает звуковые фрагменты, соответствующие отдельным фразам из звуковых
файлов при помощи ffmpeg и создаёт map-файл, описывающий временные позиции
этих фрагментов.

**n_procs**: количество одноврменно запущенных процессов. По умолчанию
используется 1 процесс. Если n_procs == 0, то n_procs берётся на 1
больше, чем количество доступных процессоров (ядер).

**NB:** Может потребоваться редактирование значений переменных в скрипте.

```sh
python check_chunks_log.py
```
Проверяет лог-файл скрипта `make_chunks.py` на наличие ошибок извлечения.

```sh
python decode_chunks.py
```
Переводит голосовые фрагменты, выделенные скриптом `make_chunks.py` в текст
при помощи *Yandex SpeechKit*.

В случае боксового SpeechKit'а создаётся по одному процессу для каждого
сервера (переменная `servers`). Поскольку качество распознавания Яндекса
сильно ухудшается с увеличением этого параметра (видимо, загрузка сервера
растёт, время распознавания фиксировано --> качество падает), увеличивать
число процессов не рекомендуется.

Для облачного SpeechKit'а количество процессов соответствует количеству
директорий в переменной `backup_dirs`. Директории, имена которых там
перечислены, должны быть созданы вручную.

Длф боксового SpeechKit'а число директорий в `backup_dirs` должно быть не
меньше числа серверов в переменной `servers`.

**NB:** В скрипте необходимо отредактировать значения переменных `servers`
и/или `cloud`, а также задать значение переменной `USE_CLOUD` (установите
`True`, если используете облачный SpeechKit). Возможно, дополнительно нужно
будет изменить список директорий в переменной `backup_dirs`.


## License

***voice2speech*** is released under the Creative Commons License. See the
[LICENSE](https://github.com/fostroll/voice2speech/blob/master/LICENSE) file
for more details.
