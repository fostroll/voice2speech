# voice2speech

Набор утилит для распознавания речи. Для работы нужны ffmpeg и доступ к Yandex
SpeechKit (облачный или боксовый)

## Использование

```sh
python make_chunks.py [n_procs]
```
Извлекает звуковые фрагменты, соответствующие отдельным фразам из звуковых
файлов при помощи ffmpeg и создаёт map-файл, описывающий временные позиции
этих фрагментов.

**n_procs**: количество одноврменно запущенных процессов. По умолчанию
используется 1 процесс. Если n_procs == 0, то n_procs берётся на 1
больше, чем количество доступных процессоров (ядер).

**NB:** Может потребоваться редактирование значений переменных в скрипте.

```sh
python check_chunks_log.py
```
Проверяет лог-файл на наличие ошибок извлечения.

```sh
python move.py <dir_in> <dir_out1> <dir_out2> [<dir_out3> ...]
```
Переносит файлы из одного каталога в несколько других в равных долях.

```sh
python decode_chunks.py server_id input_dir [n_procs]
```
Переводит голос в текст при помощи Yandex SpeechKit.

**server_id**: ключ из словаря servers (прежде чем запускать, пропишите туда
свои сервера). Если **server_id** == `'cloud'`, используется спичкит в
облаке Яндекса (вначале пропишите свои параметры доступа в
словарь cloud).

**input_dir**: каталог со звуковыми файлами, которые надо распознать.

**n_procs**: количество одноврменно запущенных процессов. По умолчанию
используется `1` процесс. Если **n_procs** == `0`, то n_procs берётся на 1
больше, чем количество доступных процессоров (ядер). Поскольку 
качество распознавания Яндекса сильно ухудшается с увеличением
этого параметра (видимо, загрузка сервера растёт, время 
распознавания фиксировано --> качество падает), не используйте его.

**NB:** В скрипте необходимо отредактировать значения переменных `servers` и
`cloud`.

```sh
sh decode_chunks.sh
```
Просто запускает распознавание в фоновом режиме. Значения параметров запуска
должны соответствовать переменным в скрипте `decode_chunks.py`.

## License

***voice2speech*** is released under the Creative Commons License. See the
[LICENSE](https://github.com/fostroll/voice2speech/blob/master/LICENSE) file
for more details.
